
<!-- Page Content -->
<div class="page-content">
  <div class="container">
      <div class="row">
          
          <!-- sidebar -->
          <!-- /Sidebar -->
          
          <!-- Instructor Quiz -->
          <div class="col-xl-12 col-lg-9">	
            <div class="container">
              <h2>Diplomes Management</h2>
              <button type="button" class="btn btn-secondary" (click)="goBack()">Back</button>
          
              <!-- Create / Update Form -->
              <div class="card mt-4">
                <div class="card-body">
                  <h5 class="card-title">{{ isEditMode ? 'Update Diplome' : 'Create Diplome' }}</h5>
            
                  <form (ngSubmit)="isEditMode ? onUpdateDiplome() : onCreateDiplome()">
                    <div class="form-group">
                      <label for="dateObtention">Date Obtention</label>
                      <input type="date" class="form-control" id="dateObtention" [(ngModel)]="selectedDiplome.dateObtention" name="dateObtention" required />
                    </div>
            
                    <div class="form-group">
                      <label for="formation">Formation</label>
                      <select class="form-control" id="formation" [(ngModel)]="selectedDiplome.formation" name="formation" required>
                        <option *ngFor="let formation of formations" [value]="formation.id">{{ formation.title }}</option>
                      </select>
                    </div>
            
                    <div class="form-group">
                      <label for="user">User</label>
                      <select class="form-control" id="user" [(ngModel)]="selectedDiplome.user" name="user" required>
                        <option *ngFor="let user of users" [value]="user.id">{{ user.name }}</option>
                      </select>
                    </div>
            
                    <button type="submit" class="btn btn-primary">{{ isEditMode ? 'Update' : 'Create' }}</button>
                    <button type="button" class="btn btn-secondary" (click)="resetForm()">Reset</button>
                  </form>
                </div>
              </div>
            
              <!-- List of Diplomes -->
              <div class="mt-4">
                <table class="table table-bordered">
                  <thead>
                    <tr>
                      <th>ID</th>
                      <th>Date Obtention</th>
                      <th>Formation</th>
                      <th>User</th>
                      <th>Diplome</th>
                      <th>Actions</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let diplome of diplomes">
                      <td>{{ diplome.id }}</td>
                      <td>{{ diplome.dateObtention }}</td>
                      <td>{{ diplome.formation.title }}</td>
                      <td>{{ diplome.user.name }}</td>
                      <td>
                        <a [href]="'http://localhost:8076/diplomes/users/Image/'+diplome.path"
                        [ngClass]="{ 'disabled-link': !diplome.path }"
                        [attr.target]="diplome.path ? '_blank' : null"
                        [attr.rel]="diplome.path ? 'noopener noreferrer' : null">
                          
                          See
                        </a>
                      </td>
                  
                      <td>
                        <button class="btn btn-warning" (click)="onEditDiplome(diplome.id)">Edit</button>
                        <button class="btn btn-danger" (click)="onDeleteDiplome(diplome.id)">Delete</button>
                        <button class="btn btn-info" (click)="onGenerateDiploma(diplome.id, diplome.user.id)">Generate Dip</button>
                      </td>
                    </tr>
                  </tbody>
                  
                </table>
              </div>
            </div>
            
           
          </div>	
          <!-- /Instructor Quiz -->

      </div>
  </div>
</div>	
<!-- /Page Content -->


