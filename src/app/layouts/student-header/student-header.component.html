<!-- Header -->
<header class="header header-page">
  <div class="header-fixed">
    <nav class="navbar navbar-expand-lg header-nav scroll-sticky">
      <div class="container">

        <!-- Logo -->
        <div class="navbar-header">
          <a (click)="toggleSidebar()" id="mobile_btn" href="javascript:void(0)">
            <span class="bar-icon"><span></span><span></span><span></span></span>
          </a>
          <a [routerLink]="routes.home" class="navbar-brand logo">
            <img src="assets/img/logo.svg" class="img-fluid" alt="Logo" />
          </a>
        </div>

        <!-- Sidebar -->
        <div class="main-menu-wrapper">
          <div class="menu-header">
            <a [routerLink]="routes.home" class="menu-logo">
              <img src="assets/img/logo.svg" class="img-fluid" alt="Logo" />
            </a>
            <a (click)="hideSidebar()" class="menu-close" href="javascript:void(0)">
              <i class="fas fa-times"></i>
            </a>
          </div>
        </div>

        <ul class="nav header-navbar-rht">
          <li class="nav-item">
            <div>
              <!-- Dark Mode Toggle -->
              <a href="javascript:void(0)"
                 id="dark-mode-toggle"
                 [class.activate]="!showDark"
                 class="dark-mode-toggle "
                 (click)="themeChange()">
                <i *ngIf="!showDark" class="fa-solid fa-moon"></i>
              </a>

              <!-- Light Mode Toggle -->
              <a href="javascript:void(0)"
                 id="light-mode-toggle"
                 class="dark-mode-toggle"
                 [class.activate]="showDark"
                 (click)="themeChange()">
                <i *ngIf="showDark" class="fa-solid fa-sun"></i>
              </a>
            </div>
          </li>

          <li class="nav-item dropdown">
            <a class="dropdown-toggle" data-bs-toggle="dropdown" href="javascript:void(0)">
              <i class="fa fa-bell"></i>
              <span *ngIf="unreadCount > 0" class="badge rounded-pill bg-danger">{{ unreadCount }}</span>
            </a>

            <div class="dropdown-menu dropdown-menu-end" style="width: 300px;">
              <h6 class="dropdown-header">Notifications</h6>

              <div *ngIf="notifications.length === 0" class="dropdown-item text-center text-muted">
                Aucune notification
              </div>

              <a *ngFor="let notif of notifications"
                 class="dropdown-item small d-flex justify-content-between align-items-center"
                 [ngClass]="{'fw-bold': !notif.read }"
                 (click)="markAsRead(notif)">
                <div>
                  âœ… <strong>{{ notif.title }}</strong><br/>
                  <small>Status : {{ notif.status }}</small><br/>
                  <small class="text-muted">{{ notif.creationDate | date:'short' }}</small>
                </div>
                <i *ngIf="!notif.read" class="fa fa-circle text-primary" style="font-size: 8px;"></i>
              </a>

              <div class="dropdown-footer text-center mt-2" *ngIf="unreadCount > 0">
                <button class="btn btn-link btn-sm" (click)="markAllAsRead()">Tout marquer comme lu</button>
              </div>
            </div>
          </li>


          <!-- User -->
          <li class="nav-item user-nav">
            <a href="javascript:void(0)" class="dropdown-toggle" data-bs-toggle="dropdown">
              <span class="user-img">
                <img [src]="user.image" alt="" />
                <span class="status online"></span>
              </span>
            </a>
            <div class="users dropdown-menu dropdown-menu-end">
              <div class="user-header text-center">
                <div class="avatar avatar-sm mb-2">
                  <img [src]="user.image" alt="" class="avatar-img rounded-circle" />
                </div>
                <div class="user-text">
                  <h6>{{ user.user}}</h6>
                  <p class="text-muted mb-0">{{ user.email }}</p>
                </div>
              </div>
              <a class="dropdown-item" [routerLink]="routes.studentDashboard"><i class="feather icon-home me-1"></i> Dashboard</a>
              <a class="dropdown-item" [routerLink]="routes.studentSettings"><i class="feather icon-user me-1"></i> Profile</a>
              <a class="dropdown-item" [routerLink]="routes.home"><i class="feather icon-log-out me-1"></i> Logout</a>
            </div>
          </li>

        </ul>
      </div>
    </nav>
  </div>
</header>
<!-- /Header -->
